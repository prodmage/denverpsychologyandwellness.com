{% include top.html %}
  <body>
    <div id="wrapper" class="wrapper">
      
      {% include header.html %}

      {% if page.banner_url %}
      <img src="{{ site.base_url }}/{{ page.banner_url }}" alt="page banner" class="banner" />
      {% endif %}

      <section class="main-content">
      	{{ content }}
      </section>
      <div class="push"></div>
    </div>
    
    <!-- Mobile menu overlay -->
    <div class="mobile-menu-overlay"></div>
    
	  {% include footer.html %}
    {% include analytics.html %}
  </body>
</html>

<!-- Lol -->
<button id="raptor" style="display: none"></button> 

<script src="{{ site.base_url }}/javascript/jquery.bxslider.min.js"></script>
<script src="{{ site.base_url }}/javascript/raptor/jquery.raptorize.2.0.js"></script>
<script>
  $(document).ready(function(){
    // Image slider
    $('#bxslider').bxSlider({
      mode: 'fade',
      captions: true,
      pager: false,
      auto: true,
      pause: 3000
    });

    // Raptor easter egg
    $('#raptor').raptorize({
      'enterOn' : 'konami-code'
    });

    // Logo hover effect
    var isScrolling = false;
    $('#logo').hover(function() {
      if (!isScrolling) {
        $( this ).attr("src", "{{ site.base_url }}/images/logo.png");
      }
    }, function() {
      if (!isScrolling) {
        $( this ).attr("src", "{{ site.base_url }}/images/logo-white.png");
      }
    });

    // Header scroll effect
    $(window).scroll(function () {
      var $header = $("#header");

      if ($header.offset().top == 0) {
        isScrolling = false;
        $header.removeClass("alternate-header");
        $header.find('#logo').attr("src", "{{ site.base_url }}/images/logo-white.png");
      }
      else if (!$header.hasClass("alternate-header"))
      {
        isScrolling = true;
        $header.addClass("alternate-header");
        $header.find('#logo').attr("src", "{{ site.base_url }}/images/logo.png");
      }
    });

    // Mobile menu toggle
    $('.mobile-menu-toggle').on('click', function() {
      $('body').toggleClass('mobile-menu-open');
      var isOpen = $('body').hasClass('mobile-menu-open');
      $(this).attr('aria-expanded', isOpen);
      
      // Prevent body scroll when menu is open
      if (isOpen) {
        $('body').css('overflow', 'hidden');
      } else {
        $('body').css('overflow', '');
      }
    });

    // Close mobile menu when clicking overlay
    $('.mobile-menu-overlay').on('click', function() {
      $('body').removeClass('mobile-menu-open');
      $('.mobile-menu-toggle').attr('aria-expanded', 'false');
      $('body').css('overflow', '');
    });

    // Close mobile menu when clicking a navigation link
    $('.navigation a').on('click', function() {
      $('body').removeClass('mobile-menu-open');
      $('.mobile-menu-toggle').attr('aria-expanded', 'false');
      $('body').css('overflow', '');
    });

    // Close mobile menu on window resize to desktop size
    $(window).on('resize', function() {
      if ($(window).width() >= 768) {
        $('body').removeClass('mobile-menu-open');
        $('.mobile-menu-toggle').attr('aria-expanded', 'false');
        $('body').css('overflow', '');
      }
    });
  });
</script>
